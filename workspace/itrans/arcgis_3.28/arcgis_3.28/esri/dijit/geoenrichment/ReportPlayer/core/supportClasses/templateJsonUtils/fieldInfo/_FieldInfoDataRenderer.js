// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.28/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/_FieldInfoDataRenderer",["esri/dijit/geoenrichment/ReportPlayer/config","../../conditionalStyling/ConditionalStyleUtil","esri/dijit/geoenrichment/utils/ObjectUtil","../../../../dataProvider/supportClasses/AreaDataUtil","dojo/i18n!esri/nls/jsapi"],function(h,k,l,m,g){g=g.geoenrichment.dijit.ReportPlayer.ReportPlayer;var e={getValueFromFieldData:function(b,a){a=a||{};var c={value:null,formattedValue:null,isUnavailableData:!1,
conditionalStyle:null},d="esriFieldTypeString"!==b.type&&(b.hasVariable||b.script);a.getPreviewValueFunction?(a=a.getPreviewValueFunction(),a=a.fields&&a.fields[b.name]||a,"string"===typeof a.formattedValue?(a=a.formattedValue,d=!1):a=a.number):a=e.getFieldDataValue(b,a.fieldData,a.currentFeatureIndex,a.isMultiFeature);c.value=a;var f=Number(a);void 0===a||"number"===typeof a&&isNaN(a)||"NaN"===a||"null"===a||d&&""===a||d&&isNaN(f)?(console.log("Error: can't calculate value for \x3d\x3e "+b.name),
c.value=NaN,c.formattedValue=h.tables.showUnavailableData?g.unavailableDataShort:"",c.isUnavailableData=!0):d?(c.formattedValue=e._formatValue(f,b),c.formatFunction=function(a){return e._formatValue(a,b)},b.triggerJson&&(c.conditionalStyle={style:k.getConditionalStyle(f,b.triggerJson),value:f,formattedValue:c.formattedValue})):c.formattedValue=a;return c},_formatValue:function(b,a){return l.formatNumber(b,{places:a.decimals||0,noSeparator:!a.useThousandsSeparator,preserveTrailingZeroes:!0})},getFieldDataValue:function(b,
a,c,d){return b&&m.getAreaDataValue({fieldName:b.templateName||b.name,fieldData:a,featureIndex:c,isMultiFeature:d,comparisonIndex:b.comparisonIndex})}};return e});