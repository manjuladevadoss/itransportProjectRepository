<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <title>Draw polyline - 4.11</title>

    <link
      rel="stylesheet"
      href="https://js.arcgis.com/4.11/esri/themes/light/main.css"
    />
    <script src="https://js.arcgis.com/4.11/"></script>

    <style>
      html,
      body,
      #viewDiv {
        height: 100%;
        width: 100%;
        margin: 0;
        padding: 0;
      }

      #instruction {
        z-index: 99;
        position: absolute;
        top: 15px;
        left: 50%;
        padding: 5px;
        margin-left: -175px;
        height: 20px;
        width: 350px;
      }
    </style>

    <script>
      require([
        "esri/Map",
        "esri/views/MapView",
        "esri/views/draw/Draw",
        "esri/Graphic",
        "esri/geometry/geometryEngine"
      ], function(Map, MapView, Draw, Graphic, geometryEngine) {
         map = new Map({
          basemap: "gray"
        });

         view = new MapView({
          container: "viewDiv",
          map: map,
          zoom: 16,
          center: [103.84347,1.32858]
        });

        // add the button for the draw tool
        view.ui.add("line-button", "top-left");

         draw = new Draw({
          view: view
        });

        // draw polyline button
        document.getElementById("line").onclick = function() {
          action = draw.create("polyline");
          view.focus();
          action.on(
            [
              "vertex-add",
              "vertex-remove",
              "cursor-update",
              "redo",
              "undo",
              "draw-complete"
            ],
            createGraphic
          );
        };

        // create a new graphic presenting the polyline that is being drawn on the view
        function createGraphic(event) {
           vertices = event.vertices;
          //view.graphics.removeAll();

          // a graphic representing the polyline that is being drawn
           graphic = new Graphic({
            geometry: {
              type: "polyline",
              paths: vertices,
              spatialReference: view.spatialReference
            },
            symbol: {
              type: "simple-line", // autocasts as new SimpleFillSymbol
              color: [4, 80, 131],
              width: 2,
            }
          });
          view.graphics.add(graphic);
        }
      });
    </script>
  </head>

  <body>
    <div id="viewDiv">
      <div
        id="line-button"
        class="esri-widget esri-widget--button esri-interactive"
        title="Draw polyline"
      >
        <span>Line</span>
        
      </div>
      <div id="instruction">
      
        <button id="vms" >VMS</button>
        <button id="line" >draw</button>
      </div>
    </div>
  </body>
</html>
