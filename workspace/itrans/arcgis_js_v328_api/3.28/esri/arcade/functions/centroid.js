// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.28/esri/copyright.txt for details.
//>>built
define("esri/arcade/functions/centroid",["require","exports","../../geometry/Point"],function(t,m,n){function q(a,b,d){var c={x:0,y:0};b&&(c.z=0);d&&(c.m=0);for(var f=0,e=a[0],g=0;g<a.length;g++){var h=a[g],k;a:if(h.length!==e.length)k=!1;else{for(k=0;k<h.length;k++)if(h[k]!==e[k]){k=!1;break a}k=!0}if(!1===k){k=r(e,h,b);var l=h,m=b,n=d,p={x:(e[0]+l[0])/2,y:(e[1]+l[1])/2};m&&(p.z=(e[2]+l[2])/2);m&&n?p.m=(e[3]+l[3])/2:n&&(p.m=(e[2]+l[2])/2);e=p;e.x*=k;e.y*=k;c.x+=e.x;c.y+=e.y;b&&(e.z*=k,c.z+=e.z);
d&&(e.m*=k,c.m+=e.m);f+=k;e=h}}0<f?(c.x/=f,c.y/=f,b&&(c.z/=f),d&&(c.m/=f)):(c.x=a[0][0],c.y=a[0][1],b&&(c.z=a[0][2]),d&&b?c.m=a[0][3]:d&&(c.m=a[0][2]));return c}function r(a,b,d){var c=b[0]-a[0];a=b[1]-a[1];return d?(b=b[2]-b[2],Math.sqrt(c*c+a*a+b*b)):Math.sqrt(c*c+a*a)}Object.defineProperty(m,"__esModule",{value:!0});m.centroidPolyline=function(a){for(var b={x:0,y:0,spatialReference:a.spatialReference.toJson()},d={x:0,y:0,spatialReference:a.spatialReference.toJson()},c=0,f=0,e=0;e<a.paths.length;e++)if(0!==
a.paths[e].length){var g;g=a.paths[e];var h=!0===a.hasZ;if(1>=g.length)g=0;else{for(var k=0,l=1;l<g.length;l++)k+=r(g[l-1],g[l],h);g=k}0===g?(h=q(a.paths[e],!0===a.hasZ,!0===a.hasM),b.x+=h.x,b.y+=h.y,!0===a.hasZ&&(b.z+=h.z),!0===a.hasM&&(b.m+=h.m),++c):(h=q(a.paths[e],!0===a.hasZ,!0===a.hasM),d.x+=h.x*g,d.y+=h.y*g,!0===a.hasZ&&(d.z+=h.z*g),!0===a.hasM&&(d.m+=h.m*g),f+=g)}return 0<f?(d.x/=f,d.y/=f,!0===a.hasZ&&(d.z/=f),!0===a.hasM&&(d.m/=f),new n(d)):0<c?(b.x/=c,b.y/=c,!0===a.hasZ&&(d.z/=c),!0===a.hasM&&
(b.m/=c),new n(b)):null};m.centroidMultiPoint=function(a){if(0===a.points.length)return null;for(var b=0,d=0,c=0,f=0,e=0;e<a.points.length;e++){var g=a.getPoint(e);!0===g.hasZ&&(c+=g.z);!0===g.hasM&&(f+=g.m);b+=g.x;d+=g.y;f+=g.m}b={x:b/a.points.length,y:d/a.points.length,spatialReference:null};b.spatialReference=a.spatialReference.toJson();!0===a.hasZ&&(b.z=c/a.points.length);!0===a.hasM&&(b.m=f/a.points.length);return new n(b)};m.angle2D=function(a,b){var d=a.x;a=a.y;var c=b.x;b=b.y;var f=d*d+a*
a;0<f&&(f=1/Math.sqrt(f));var e=c*c+b*b;0<e&&(e=1/Math.sqrt(e));d=(d*c+a*b)*f*e;return 1<d?0:-1>d?Math.PI:180*Math.acos(d)/Math.PI};m.angleBetween2D=function(a,b,d){var c=a.x-b.x;a=a.y-b.y;var f=d.x-b.x;b=d.y-b.y;d=Math.sqrt(c*c+a*a);var e=Math.sqrt(f*f+b*b);return 180*Math.acos(c/d*(f/e)+a/d*(b/e))/Math.PI}});